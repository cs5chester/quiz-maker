function quizWidget(_){var e=_("[data-quiz-config]").data("quizConfig"),t={options:{getStartedButtonClass:"quiz-widget__get-started-button",getStartedContainerClass:"quiz-widget__get-started",getStartedText:"Not sure which bed you need? Take our quick Sleep Selector quiz and well recommended the right bed for you.",quizTabs:"#quiz-tabs",questionTitle:".qp_qi",questionPicture:".qp_pic",learnMoreClass:"quiz-widget__learn-more",quizResults:"#quiz-results",quizContainer:".quiz-container",quizWrapper:".quiz-widget__wrapper",progressBarWrapperClass:"quiz-widget__progress-bar-wrapper",progressBar:".quiz-widget__progress-bar",progressLine:".quiz-widget__progress-line",progressBarItems:".quiz-widget__progress-bar-item"},_loadQuiz:function(){var t=this;qz.setKey(e.publicKey),qz.load({quiz:e.quizId,parent:e.quizParent,onCreate:function(){t._init()}})},_create:function(){e.publicKey&&e.quizParent&&e.quizId&&(this._loadQuiz(),quiz.addCB("afterResults",function(){var t,e;this._processLeads(),this.quizTime&&(clearTimeout(this.quizTime),this.quizTime=null),_(this.options.quizContainer).toggleClass("results",this._isResultsStep()),this._triggerProgressBarVisibility(!1),this._removeBaseStyles(),this._isResultsStep()&&((t=document.createElement("script")).type="text/javascript",t.async=!0,t.src="//staticw2.yotpo.com/nTvdl5HFT1TU7SIJWaQU9c4b0n2gzJx11sDi0L8B/widget.js",e=document.getElementsByTagName("script")[0],console.log(_(".yotpo-main-widget")),e.parentNode.insertBefore(t,e))}.bind(this)),quiz.addCB("Next",function(t){this._updateProgressBar(t.frompage+1)}.bind(this)),quiz.addCB("Back",function(t){this._updateProgressBar(t.frompage-1)}.bind(this)))},_processLeads:function(){_("#quiz-ntabs").length&&(this._replacePlaceholders(),this._replaceButtons())},_replacePlaceholders:function(){var t,e=[{old:"Enter number here",new:"Phone number"},{old:"Email",new:"Email address"}];for(t in e){var i=e[t],s=_('input[placeholder="'+i.old+'"]');s.length&&s.attr("placeholder",i.new)}},_replaceButtons:function(){_("#quiz-end input").val("Submit"),_("#quiz-skip input").val("No thanks, show me my results")},_updateProgressBar:function(t){var e=this._getTabs(),t=t||+e.siblings(".sel").attr("tid"),i=_(this.options.progressBarItems),s="active",e=t/e.length*100,e=(_(this.options.progressLine).css({width:e+"%"}),i.removeClass(s),i.eq(t-1)),i=e.offset();e.addClass(s),i&&_(this.options.progressBar).stop().animate({scrollLeft:i.left-20},500)},_isResultsStep:function(){return 0<_(this.options.quizResults).length},_init:function(){this._prepareWidget(),this._initEvents()},_prepareWidget:function(){this._applyStyles(),this._isQuizInProgress()?this._beginQuiz():(this._createGetStarted(),this._updateQuestionsHtml())},_isQuizInProgress:function(){var t=e.quizId.substring(1);return-1!==window.location.hash.indexOf(t)},_applyStyles:function(){var t=_("<link/>",{rel:"stylesheet",type:"text/css",href:e.styles});this._removeBaseStyles(),t.on("load",function(){this._triggerQuizWrapperVisibility(!0)}.bind(this)),t.appendTo(this._getWrapper())},_removeBaseStyles:function(){this._getParent().find("link").remove(),_(".qp_quiz").attr("style","")},_getParent:function(){return _("#"+e.quizParent)},_getWrapper:function(){return _("."+e.quizWrapper)},_getTabs:function(){return _(this.options.quizTabs+">div")},_updateQuestionsHtml:function(){var c=this._getTabs(),g=this.options,p=_('<div style="display: none" class="'+g.progressBarWrapperClass+'"><div class="quiz-widget__progress-line-wrapper"><div class="quiz-widget__progress-line"></div></div><div class="quiz-widget__progress-bar"></div></div>');_.each(c,function(t,e){var e=_(e),i=e.find(g.questionTitle),t=_('<div class="quiz-widget__question-index-of-total-text">Question '+(t+1)+" of "+c.length+"</div>"),s=i.find("code"),r=s.data("title"),n=s.data("text"),s=s.data("progressbar"),a=e.find(g.questionPicture),o=a.css("background-image"),u=_('<button class="quiz-widget__learn-more-open"></button>'),d=_('<button class="quiz-widget__learn-more-close"></button>'),l="quiz-widget__learn-more-holder",r=_('<div style="display: none" class='+this.options.learnMoreClass+'><div class="'+l+'"><div class="quiz-widget__learn-more-column quiz-widget__learn-more-column--info"><h3>'+r+'</h3><div class="quiz-widget__learn-more-text">'+n+'</div></div><div class="quiz-widget__learn-more-column quiz-widget__learn-more-column--image"><div class="quiz-widget__learn-more-image"></div></div></div></div>');a.remove(),r.find("."+l).append(d),i.find(">div:first-child").append(u),t.insertBefore(i),e.append(r),s&&p.find(".quiz-widget__progress-bar").append('<div class="quiz-widget__progress-bar-item">'+s+"</div>"),_(".quiz-widget__learn-more-image").css("background-image",o),d.on("click",function(){this._triggerLearnMoreVisibility(!1)}.bind(this)),u.on("click",function(){this._triggerLearnMoreVisibility(!0)}.bind(this))}.bind(this)),_("."+g.progressBarWrapperClass).remove(),_(g.quizWrapper).prepend(p)},_createGetStarted:function(){var t="Quiz time: "+e.quizTimeMinutes+" minutes",t="<div class="+this.options.getStartedContainerClass+'><h3>Sleep Selector</h3><div class="quiz-widget__quiz-time">'+t+'</div><div class="quiz-widget__get-started-text">'+this.options.getStartedText+"</div><button class="+this.options.getStartedButtonClass+">Get started</button>";_("."+this.options.getStartedContainerClass).remove(),_("."+e.quizWrapper).prepend(t)},_initEvents:function(){var t=this.options;_("."+t.getStartedButtonClass).on("click",function(){this._beginQuiz(),this._setQuizTime()}.bind(this)),_(document).off("click",".quiz-lc #quiz-next"),_(document).on("click",".quiz-lc #quiz-next",function(t){setTimeout(function(){quiz.saveQ("E")},500)}.bind(this)),_(document).one("click",".quiz-lc #quiz-back",function(){window.location.hash="",this._reloadQuiz()}.bind(this)),_(document).on("click",".quiz-widget__warranty-button",function(t){var t=_(t.target),e=t.hasClass("next"),t=t.siblings(".quiz-widget__warranty-holder").find(".active"),e=t[e?"next":"prev"]();0<e.length&&(t.removeClass("active"),e.addClass("active"))})},_reloadQuiz:function(){this._triggerQuizContainerVisibility(!1),this._triggerProgressBarVisibility(!1),this._getParent().html(""),this._loadQuiz()},_setQuizTime:function(){var t=6e4*+(e.quizTimeMinutes||2);this.quizTime=setTimeout(function(){this._reloadQuiz()}.bind(this),t)},_triggerQuizContainerVisibility:function(t){this._getParent().toggle(t)},_triggerQuizWrapperVisibility:function(t){_("."+e.quizWrapper).toggle(t)},_triggerLearnMoreVisibility:function(t){_("body").toggleClass("quiz-body-overflowed",t),_("."+this.options.learnMoreClass).toggle(t)},_triggerGetStartedVisibility:function(t){_("."+this.options.getStartedContainerClass).toggle(t)},_triggerProgressBarVisibility:function(t){_("."+this.options.progressBarWrapperClass).toggle(t)},_beginQuiz:function(){this._triggerQuizContainerVisibility(!0),this._triggerProgressBarVisibility(!0),this._triggerGetStartedVisibility(!1),this._updateProgressBar()}};e&&t._create(),window.quizWidget=t}!function(){var o,t;function e(){o=window.jQuery.noConflict(!0),i()}function i(){var t=window,e=document,i="qp",s=void 0,r=void 0,n=document.querySelectorAll("A[quiz],DIV[quiz],A[data-quiz],DIV[data-quiz]");if(n&&n.length)for(var a=0;a<n.length;a++)n[a].id="quiz-embed-"+a,n[a].href="javascript:var i=document.getElementById('quiz-embed-"+a+"');try{qz.startQuiz(i)}catch(e){i.start=1;i.style.cursor='wait';i.style.opacity='0.5'};void(0);";t.QP=i,t.qp=t.qp||function(){(t.qp.q=t.qp.q||[]).push(arguments)},t.qp.l=+new Date,s=e.createElement("script"),r=e.getElementsByTagName("script")[0],s.async=1,s.src="//take.quiz-maker.com/3012/CDN/quiz-embed-v1.js",s.readyState?s.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||quizWidget(o)}:s.onload=function(){quizWidget(o)},r.parentNode.insertBefore(s,r)}void 0===window.jQuery||"3.6.0"!==window.jQuery.fn.jquery?((t=document.createElement("script")).setAttribute("type","text/javascript"),t.setAttribute("src","https://code.jquery.com/jquery-3.6.0.min.js"),t.readyState?t.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||e()}:t.onload=e,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(t)):(o=window.jQuery,i())}();