function quizWidget(_){var e=_("[data-quiz-config]").data("quizConfig"),i={options:{getStartedButtonClass:"quiz-widget__get-started-button",getStartedContainerClass:"quiz-widget__get-started",getStartedText:"Not sure which bed you need? Take our quick Sleep Selector quiz and well recommended the right bed for you.",quizTabs:"#quiz-tabs",questionTitle:".qp_qi",questionPicture:".qp_pic",learnMoreClass:"quiz-widget__learn-more",quizResults:"#quiz-results",quizContainer:".quiz-container",quizWrapper:".quiz-widget__wrapper",progressBarWrapperClass:"quiz-widget__progress-bar-wrapper",progressLine:".quiz-widget__progress-line",progressBarItems:".quiz-widget__progress-bar-item"},_loadQuiz:function(){var t=this;qz.load({quiz:e.quizId,parent:e.quizParent,onCreate:function(i){t._init()}})},_create:function(){var i=e.publicKey;i&&e.quizParent&&e.quizId&&(qz.setKey(i),this._loadQuiz(),quiz.addCB("afterResults",function(){this.quizTime&&(clearTimeout(this.quizTime),this.quizTime=null),_(this.options.quizContainer).toggleClass("results",this._isResultsStep()),this._triggerProgressBarVisibility(!1),this._removeBaseStyles()}.bind(this)),quiz.addCB("Next",function(i){this._updateProgressBar(i.frompage+1)}.bind(this)),quiz.addCB("Back",function(i){this._updateProgressBar(i.frompage-1)}.bind(this)))},_updateProgressBar:function(i){var t=this._getTabs(),i=i||+t.siblings(".sel").attr("tid"),e=_(this.options.progressBarItems),s="active",t=i/t.length*100;_(this.options.progressLine).css({width:t+"%"}),e.removeClass(s),e.eq(i-1).addClass(s)},_isResultsStep:function(){return 0<_(this.options.quizResults).length},_init:function(){this._prepareWidget(),this._initEvents()},_prepareWidget:function(){this._applyStyles(),this._isQuizInProgress()?this._beginQuiz():(this._createGetStarted(),this._updateQuestionsHtml())},_isQuizInProgress:function(){var i=e.quizId.substring(1);return-1!==window.location.hash.indexOf(i)},_applyStyles:function(){var i=_("<link/>",{rel:"stylesheet",type:"text/css",href:e.styles});this._removeBaseStyles(),i.on("load",function(){this._triggerQuizWrapperVisibility(!0)}.bind(this)),i.appendTo(this._getWrapper())},_removeBaseStyles:function(){this._getParent().find("link").remove(),_(".qp_quiz").attr("style","")},_getParent:function(){return _("#"+e.quizParent)},_getWrapper:function(){return _("."+e.quizWrapper)},_getTabs:function(){return _(this.options.quizTabs+">div")},_updateQuestionsHtml:function(){var g=this._getTabs(),c=this.options,p=_('<div style="display: none" class="'+c.progressBarWrapperClass+'"><div class="quiz-widget__progress-line-wrapper"><div class="quiz-widget__progress-line"></div></div><div class="quiz-widget__progress-bar"></div></div>');_.each(g,function(i,t){var t=_(t),e=t.find(c.questionTitle),i=_('<div class="quiz-widget__question-index-of-total-text">Question '+(i+1)+" of "+g.length+"</div>"),s=e.find("code"),r=s.data("title"),n=s.data("text"),s=s.data("progressbar"),a=t.find(c.questionPicture),o=a.css("background-image"),u=_('<button class="quiz-widget__learn-more-open"></button>'),d=_('<button class="quiz-widget__learn-more-close"></button>'),l="quiz-widget__learn-more-holder",r=_('<div style="display: none" class='+this.options.learnMoreClass+'><div class="'+l+'"><div class="quiz-widget__learn-more-column quiz-widget__learn-more-column--info"><h3>'+r+'</h3><div class="quiz-widget__learn-more-text">'+n+'</div></div><div class="quiz-widget__learn-more-column quiz-widget__learn-more-column--image"><div class="quiz-widget__learn-more-image"></div></div></div></div>');a.remove(),r.find("."+l).append(d),e.find(">div:first-child").append(u),i.insertBefore(e),t.append(r),s&&p.find(".quiz-widget__progress-bar").append('<div class="quiz-widget__progress-bar-item">'+s+"</div>"),_(".quiz-widget__learn-more-image").css("background-image",o),d.on("click",function(){this._triggerLearnMoreVisibility(!1)}.bind(this)),u.on("click",function(){this._triggerLearnMoreVisibility(!0)}.bind(this))}.bind(this)),_(c.quizWrapper).prepend(p)},_createGetStarted:function(){var i="Quiz time: "+e.quizTimeMinutes+" minutes",i="<div class="+this.options.getStartedContainerClass+'><h3>Sleep Selector</h3><div class="quiz-widget__quiz-time">'+i+'</div><div class="quiz-widget__get-started-text">'+this.options.getStartedText+"</div><button class="+this.options.getStartedButtonClass+">Get started</button>";_("."+e.quizWrapper).prepend(i)},_initEvents:function(){var i=this.options;_("."+i.getStartedButtonClass).on("click",function(){this._beginQuiz(),this._setQuizTime()}.bind(this))},_reloadQuiz:function(){console.log("reload"),this._triggerQuizContainerVisibility(!1),this._getParent().html(""),_("."+this.options.getStartedContainerClass).remove(),this._loadQuiz()},_setQuizTime:function(){var i=6e4*+(e.quizTimeMinutes||2);this.quizTime=setTimeout(function(){this._reloadQuiz()}.bind(this),i)},_triggerQuizContainerVisibility:function(i){this._getParent().toggle(i)},_triggerQuizWrapperVisibility:function(i){_("."+e.quizWrapper).toggle(i)},_triggerLearnMoreVisibility:function(i){_("."+this.options.learnMoreClass).toggle(i)},_triggerGetStartedVisibility:function(i){_("."+this.options.getStartedContainerClass).toggle(i)},_triggerProgressBarVisibility:function(i){_("."+this.options.progressBarWrapperClass).toggle(i)},_beginQuiz:function(){this._triggerQuizContainerVisibility(!0),this._triggerProgressBarVisibility(!0),this._triggerGetStartedVisibility(!1),this._updateProgressBar()}};e&&i._create(),window.quizWidget=i}!function(){var u,i;function t(){u=window.jQuery.noConflict(!0),e()}function e(){var i=window,t=document,e="script",s="qp",r=void 0,n=void 0,a=document.querySelectorAll("A[quiz],DIV[quiz],A[data-quiz],DIV[data-quiz]");if(a&&a.length)for(var o=0;o<a.length;o++)a[o].id="quiz-embed-"+o,a[o].href="javascript:var i=document.getElementById('quiz-embed-"+o+"');try{qz.startQuiz(i)}catch(e){i.start=1;i.style.cursor='wait';i.style.opacity='0.5'};void(0);";i.QP=s,i.qp=i.qp||function(){(i.qp.q=i.qp.q||[]).push(arguments)},i.qp.l=+new Date,r=t.createElement(e),n=t.getElementsByTagName(e)[0],r.async=1,r.src="//take.quiz-maker.com/3012/CDN/quiz-embed-v1.js",r.readyState?r.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||quizWidget(u)}:r.onload=function(){quizWidget(u)},n.parentNode.insertBefore(r,n)}void 0===window.jQuery||"3.6.0"!==window.jQuery.fn.jquery?((i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src","https://code.jquery.com/jquery-3.6.0.min.js"),i.readyState?i.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||t()}:i.onload=t,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(i)):(u=window.jQuery,e())}();